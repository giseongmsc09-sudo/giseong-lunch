<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì„±ì¤‘í•™êµ ê¸‰ì‹</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #ffffff; /* ë…¸ì…˜ ë°°ê²½ìƒ‰ì— ë§ê²Œ ì¡°ì • ê°€ëŠ¥ (í°ìƒ‰) */
            color: #37352f;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            box-sizing: border-box;
        }
        .container {
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        h2 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #eb5757; /* í¬ì¸íŠ¸ ì»¬ëŸ¬ */
        }
        .date {
            font-size: 0.9rem;
            color: #787774;
            margin-bottom: 15px;
        }
        .menu-list {
            font-size: 1rem;
            line-height: 1.6;
            word-break: keep-all;
            background: #f7f6f3; /* ë…¸ì…˜ íšŒìƒ‰ ë°°ê²½ ëŠë‚Œ */
            padding: 15px;
            border-radius: 8px;
        }
        .loading {
            color: #999;
        }
        @media (prefers-color-scheme: dark) {
            body { background-color: #191919; color: #d9d9d9; }
            .menu-list { background: #2f2f2f; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ± ê¸°ì„±ì¤‘ ì˜¤ëŠ˜ì˜ ê¸‰ì‹</h2>
        <div class="date" id="date-display"></div>
        <div class="menu-list" id="menu-display">
            <span class="loading">ë©”ë‰´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
        </div>
    </div>

    <script>
        // 1. ë‚ ì§œ êµ¬í•˜ê¸° (YYYYMMDD í˜•ì‹)
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        const todayStr = `${year}${month}${day}`;
        const dateDisplay = `${year}ë…„ ${month}ì›” ${day}ì¼`;

        document.getElementById('date-display').innerText = dateDisplay;

        // 2. API í˜¸ì¶œ ì„¤ì •
        const ATPT_OFCDC_SC_CODE = "G10"; // ëŒ€ì „êµìœ¡ì²­
        const SD_SCHUL_CODE = "7430048"; // ê¸°ì„±ì´ˆë“±í•™êµ
        const API_KEY = "Type=json&pIndex=1&pSize=100"; // ì¸ì¦í‚¤ ì—†ì´ í˜¸ì¶œ ê°€ëŠ¥ (íŠ¸ë˜í”½ ì œí•œ ìˆìŒ)
        // ì‹¤ì œ ì„œë¹„ìŠ¤ìš©ì´ë¼ë©´ NEIS ì˜¤í”ˆ API í¬í„¸ì—ì„œ í‚¤ë¥¼ ë°œê¸‰ë°›ì•„ &KEY=ì¸ì¦í‚¤ ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.
        
        const url = `https://open.neis.go.kr/hub/mealServiceDietInfo?${API_KEY}&ATPT_OFCDC_SC_CODE=${ATPT_OFCDC_SC_CODE}&SD_SCHUL_CODE=${SD_SCHUL_CODE}&MLSV_YMD=${todayStr}`;

        // 3. ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        fetch(url)
            .then(response => response.json())
            .then(data => {
                const display = document.getElementById('menu-display');
                
                if (data.mealServiceDietInfo) {
                    // ê¸‰ì‹ ì •ë³´ê°€ ìˆëŠ” ê²½ìš°
                    const menuData = data.mealServiceDietInfo[1].row[0].DDISH_NM;
                    
                    // ì•Œë ˆë¥´ê¸° ë²ˆí˜¸(1.2.3...) ë° HTML íƒœê·¸(<br/>) ì œê±° ì •ì œ
                    const cleanMenu = menuData
                        .replace(/[0-9.]/g, "") // ìˆ«ìì™€ ì  ì œê±°
                        .replace(/\(\)/g, "")   // ë¹ˆ ê´„í˜¸ ì œê±°
                        .replace(/<br\/>/g, "\n"); // ì¤„ë°”ê¿ˆ íƒœê·¸ë¥¼ ê°œí–‰ë¬¸ìë¡œ ë³€ê²½

                    display.innerText = cleanMenu;
                } else {
                    // ê¸‰ì‹ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° (ì£¼ë§, ê³µíœ´ì¼ ë“±)
                    display.innerText = "ì˜¤ëŠ˜ì€ ê¸‰ì‹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.";
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('menu-display').innerText = "ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
            });
    </script>
</body>
</html>
